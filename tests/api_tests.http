# ğŸ§¬ ninaivalaigal API Test Collection
# Use with VS Code REST Client extension or similar HTTP clients

### Variables
@baseUrl = http://localhost:13370
@contentType = application/json

### ğŸ¥ Health Check
GET {{baseUrl}}/health

### ğŸ“– API Documentation
GET {{baseUrl}}/docs

### ğŸ“‹ OpenAPI Schema
GET {{baseUrl}}/openapi.json

### ===== AUTHENTICATION TESTS =====

### ğŸ” Valid Login Test
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "test@example.com",
  "password": "testpassword123"
}

### ğŸ” Login - Missing Email (400 Error)
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "password": "testpassword123"
}

### ğŸ” Login - Invalid Email Format (400 Error)
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "not-an-email",
  "password": "testpassword123"
}

### ğŸ” Login - Non-existent User (401 Error)
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "nonexistent@example.com",
  "password": "wrongpassword"
}

### ğŸ” Login - Empty Credentials (400 Error)
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "",
  "password": ""
}

### ===== SIGNUP TESTS =====

### ğŸ“ Valid Individual Signup
POST {{baseUrl}}/auth/signup/individual
Content-Type: {{contentType}}

{
  "email": "newuser@example.com",
  "password": "strongpassword123",
  "full_name": "John Doe",
  "preferred_name": "John"
}

### ğŸ“ Signup - Weak Password (400 Error)
POST {{baseUrl}}/auth/signup/individual
Content-Type: {{contentType}}

{
  "email": "weakpass@example.com",
  "password": "123",
  "full_name": "Weak Password User"
}

### ğŸ“ Signup - Invalid Email (400 Error)
POST {{baseUrl}}/auth/signup/individual
Content-Type: {{contentType}}

{
  "email": "invalid-email",
  "password": "validpassword123",
  "full_name": "Invalid Email User"
}

### ğŸ“ Signup - Missing Required Fields (422 Error)
POST {{baseUrl}}/auth/signup/individual
Content-Type: {{contentType}}

{
  "email": "incomplete@example.com"
}

### ğŸ¢ Valid Organization Signup
POST {{baseUrl}}/auth/signup/organization
Content-Type: {{contentType}}

{
  "organization_name": "Test Company Inc",
  "admin_email": "admin@testcompany.com",
  "admin_password": "adminpassword123",
  "admin_full_name": "Admin User",
  "industry": "Technology",
  "size": "small"
}

### ===== EMAIL VERIFICATION TESTS =====

### âœ‰ï¸ Verify Email - Valid Token
POST {{baseUrl}}/auth/verify-email
Content-Type: {{contentType}}

{
  "email": "test@example.com",
  "verification_token": "valid-token-here"
}

### âœ‰ï¸ Verify Email - Invalid Token (400 Error)
POST {{baseUrl}}/auth/verify-email
Content-Type: {{contentType}}

{
  "email": "test@example.com",
  "verification_token": "invalid-token"
}

### ===== AUTHENTICATED REQUESTS =====

### ğŸ‘¤ Get Current User Info (requires JWT token)
GET {{baseUrl}}/auth/me
Authorization: Bearer YOUR_JWT_TOKEN_HERE

### ===== EDGE CASE TESTS =====

### ğŸ”’ SQL Injection Attempt (should be handled safely)
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "'; DROP TABLE users; --",
  "password": "test123"
}

### ğŸ”’ XSS Attempt (should be sanitized)
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "<script>alert('xss')</script>@example.com",
  "password": "test123"
}

### ğŸ”’ Unicode Characters Test
POST {{baseUrl}}/auth/signup/individual
Content-Type: {{contentType}}

{
  "email": "tÃ«st@Ã©xample.com",
  "password": "tÃ«stpÃ¤sswÃ¶rd123",
  "full_name": "TÃ«st Ãœser"
}

### ğŸ”’ Very Long Input Test
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "verylongemailaddressthatexceedsnormallimitsandtestsvalidation@example.com",
  "password": "verylongpasswordthatmightcauseissuesifnothandledproperly123456789"
}

### ===== PERFORMANCE TESTS =====

### âš¡ Rapid Fire Login (for rate limiting test)
# Run this multiple times quickly to test rate limiting
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "email": "ratelimit@example.com",
  "password": "testpassword123"
}

### ===== TEAM & ORGANIZATION TESTS =====

### ğŸ‘¥ Join Team by Code
POST {{baseUrl}}/auth/join-team-by-code
Content-Type: {{contentType}}

{
  "invitation_code": "TEAM123",
  "user_email": "newmember@example.com"
}

### ğŸ¢ Get Organization Invitations
GET {{baseUrl}}/auth/organizations/org-123/invitations
Authorization: Bearer YOUR_JWT_TOKEN_HERE

### ===== TEST ENDPOINTS =====

### ğŸ§ª Test Endpoint (for debugging)
POST {{baseUrl}}/auth/test
Content-Type: {{contentType}}

{
  "test_data": "Hello from HTTP client",
  "timestamp": "2024-09-25T12:00:00Z"
}

### ğŸ§ª Login Test Endpoint
POST {{baseUrl}}/auth/login-test
Content-Type: {{contentType}}

{}

### ğŸ§ª Authenticate Test Endpoint
POST {{baseUrl}}/auth/authenticate
Content-Type: {{contentType}}

{
  "test": true
}
