---
name: Runner Smoke Test

on:
  workflow_dispatch:
  push:
    branches: [main ]
    paths: ['.github/workflows/runner-smoke-test.yml' ]

jobs:
  test-runner:
    runs-on: [self-hosted, macstudio]
    timeout-minutes: 5

    steps:
      - name: Basic system info
        run: |
          echo "ğŸ–¥ï¸  Runner: $RUNNER_NAME"
          echo "ğŸ System: $(uname -a)"
          echo "ğŸ Python: $(python3 --version)"
          echo "ğŸ“¦ Container: $(container --version || echo 'not found')"
          echo "ğŸ§  Memory: $(system_profiler SPHardwareDataType | grep Memory)"

      - name: Test Apple Container CLI
        run: |
          if command -v container >/dev/null 2>&1; then
            echo "âœ… Apple Container CLI found"
            container --version
          else
            echo "âŒ Apple Container CLI not found"
            exit 1
          fi

      - name: Success
        run: |
          echo "ğŸ‰ Hybrid runner setup working perfectly!"
          echo "ğŸ“Š Runner: ninaivalaigal-runner"
          echo "ğŸ—ï¸  Architecture: Hybrid (repo + org runners)"
