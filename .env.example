# Apple Container CLI Configuration for Mac Studio
# Complete ninaivalaigal stack: PostgreSQL + PgBouncer + FastAPI

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Postgres (host -> container:5432)
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
HOST_PORT=5433

# Credentials
POSTGRES_USER=nina
POSTGRES_PASSWORD=change_me_securely
POSTGRES_DB=nina

# Data volume path on Mac Studio (Note: volume permissions need work)
DB_VOLUME=$HOME/ninaivalaigal/volumes/db

# Container settings
CONTAINER_NAME=nv-db
IMAGE=pgvector/pgvector:pg15
WAIT_SEC=90

# =============================================================================
# PGBOUNCER CONFIGURATION
# =============================================================================
PGBOUNCER_PORT=6432
PGBOUNCER_CONTAINER_NAME=nv-pgbouncer
PGBOUNCER_IMAGE=pgbouncer/pgbouncer:latest

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================
API_PORT=13370
API_CONTAINER_NAME=nv-api
API_IMAGE=python:3.11-slim

# JWT Configuration
NINAIVALAIGAL_JWT_SECRET=dev-secret-change-in-production
NINAIVALAIGAL_JWT_EXPIRATION_HOURS=168

# Production toggles
API_RELOAD=false

# =============================================================================
# MEM0 SIDECAR CONFIGURATION
# =============================================================================
MEM0_PORT=7070
MEM0_CONTAINER_NAME=nv-mem0
MEM0_IMAGE=ninaivalaigal-mem0:latest

# Shared secret for mem0 sidecar authentication
MEMORY_SHARED_SECRET=dev-memory-secret-change-in-production

# =============================================================================
# UI CONFIGURATION
# =============================================================================
UI_PORT=8080
UI_CONTAINER_NAME=nv-ui
UI_IMAGE=ninaivalaigal-ui:latest

# Memory provider: "native" (direct) or "http" (via sidecar)
MEMORY_PROVIDER=http
MEMORY_HTTP_BASE=http://localhost:7070

# =============================================================================
# STACK CONFIGURATION
# =============================================================================
# Default database connection (via PgBouncer for production)
DATABASE_URL=postgresql://nina:change_me_securely@localhost:6432/nina

# Direct database connection (bypass PgBouncer - troubleshooting only)
DATABASE_URL_DIRECT=postgresql://nina:change_me_securely@localhost:5433/nina

# API Base URL
NINAIVALAIGAL_API_BASE=http://localhost:13370
